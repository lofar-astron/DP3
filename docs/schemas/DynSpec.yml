description: |
  Creates dynamic spectra given a list of source directions by phase shifting the observation MS to the directions of interest and averaging over all baselines.

  The step supports subtraction of sources before measuring the spectrum, either by subtracting already predicted model visibilities or using an internal H5ParmPredict step. The subtracted sky model and the measured sources should currently not overlap, i.e., it is assumed that measured sources are not in the sky model given to the H5ParmPredict substep.
inputs:
  type:
    type: string
    doc: >-
      Case-insensitive step type; must be 'dynspec'.
  sourcelist:
    type: string
    doc: |
      Name of the file containing a list of sources, .e.g., ``sources.skymodel`` (the filename should always end with with ``.skymodel`` or ``.txt``). For each of these sources a dynamic spectrum with axes time, frequency and stokes parameter (I, Q, U, and V) will be created.

      The source list needs to be defined using the familar sky-model text format. For example:
      ```
      FORMAT = Name, Ra, Dec
      source_1, 02:00:00, -30.00.00
      source_2, 00:10:00, +30.50.00
      ```
  subtractmodelcolumn:
    type: string
    doc: Name of the MS column with foreground visibilities. These will be subtracted from the data before determining the dynamic spectrum.
  fitsprefix:
    type: string
    doc: Filename prefix for the spectra written to disk in the FITS file format. The filename follows the pattern ``<prefix>-<source name>-dynspec.fits``. The source name is read from the file specified by the ``sourcelist`` parameter.
  h5parmpredict&#46;*:
    doc: H5ParmPredict sub-step. Requires at least a sky-model and calibration solutions to subtract predicted foreground sources. This is an alternative to subtraction with ``subtractmodelcolumn``. Note that one of these options can be used!
